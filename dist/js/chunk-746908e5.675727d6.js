(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-746908e5"],{37906:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("h1",{staticClass:"title"},[e._v("Search Page")]),r("b-navbar",{attrs:{toggleable:"lg",type:"light",variant:"light"}},[r("b-navbar-nav",[r("b-nav-form",{on:{submit:function(t){return t.preventDefault(),e.onSearch(t)},reset:function(t){return t.preventDefault(),e.onReset(t)}}},[r("b-form-input",{staticClass:"mr-sm-2",attrs:{variant:"outline-secondary",placeholder:"Search",type:"text"},on:{change:e.onChangeQuery},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}})],1),r("b-nav-item-dropdown",{attrs:{text:"Number of search results"},on:{submit:function(t){return t.preventDefault(),e.onSearch(t)},reset:function(t){return t.preventDefault(),e.onReset(t)}}},e._l(e.numbers,(function(t,n){return r("b-dropdown-item",{key:n,on:{click:function(r){e.number=t}}},[e._v(" "+e._s(t)+" ")])})),1),r("b-nav-item-dropdown",{attrs:{text:"Cuisine"},on:{submit:function(t){return t.preventDefault(),e.onSearch(t)},reset:function(t){return t.preventDefault(),e.onReset(t)}}},e._l(e.cuisines,(function(t,n){return r("b-dropdown-item",{key:n,on:{click:function(r){e.form.cuisine=t}}},[e._v(" "+e._s(t)+" ")])})),1),r("b-nav-item-dropdown",{attrs:{text:"Diet"},on:{submit:function(t){return t.preventDefault(),e.onSearch(t)},reset:function(t){return t.preventDefault(),e.onReset(t)}}},e._l(e.diets,(function(t,n){return r("b-dropdown-item",{key:n,on:{click:function(r){e.form.diet=t}}},[e._v(" "+e._s(t)+" ")])})),1),r("b-nav-item-dropdown",{attrs:{text:"Intolerances"},on:{submit:function(t){return t.preventDefault(),e.onSearch(t)},reset:function(t){return t.preventDefault(),e.onReset(t)}}},e._l(e.intoleranceses,(function(t,n){return r("b-dropdown-item",{key:n,on:{click:function(r){e.form.intolerances=t}}},[e._v(" "+e._s(t)+" ")])})),1),r("b-nav-item-dropdown",{attrs:{text:"Sort by"},on:{submit:function(t){return t.preventDefault(),e.onSearch(t)},reset:function(t){return t.preventDefault(),e.onReset(t)}}},[r("b-dropdown-item",{attrs:{href:"#",variant:this.sort_time},on:{click:function(t){return e.sortBy("time")}}},[e._v("Recipe's preparation time")]),r("b-dropdown-item",{attrs:{href:"#",variant:this.sort_popularity},on:{click:function(t){return e.sortBy("popularity")}}},[e._v("Recipe's popularity")])],1),r("b-nav-form",{on:{submit:function(t){return t.preventDefault(),e.onSearch(t)},reset:function(t){return t.preventDefault(),e.onReset(t)}}},[r("b-button",{staticClass:"my-2 my-sm-0",attrs:{variant:"outline-secondary",type:"submit"},on:{click:e.onSearch}},[r("b-icon",{attrs:{icon:"search","aria-hidden":"true"}})],1),r("b-button",{staticClass:"my-2 my-sm-0",attrs:{variant:"outline-secondary",type:"reset"},on:{click:e.onReset}},[e._v("Reset ")])],1)],1)],1),e.searched>0?r("div",[r("RecipePreviewList",{attrs:{title:"Search Results",log_in:Boolean(e.$root.store.username),searched:e.searched,query:e.query,number:e.number,cuisine:e.form.cuisine,diet:e.form.diet,intolerance:e.form.intolerances,sort:e.sortby}})],1):e.$root.store.lastSearch?r("div",[r("RecipePreviewList",{attrs:{title:"Last Search",log_in:Boolean(e.$root.store.username)}})],1):e._e()],1)},s=[],i=r("2909"),a=(r("96cf"),r("1da1")),o=r("99d8"),u=["","Gluten Free","Ketogenic","Vegetarian","Lacto-Vegetarian","Ovo-Vegetarian","Vegan","Pescetarian","Paleo","Primal","Low FODMAP","Whole30"],c=["5","10","15"],l=["","African","American","British","Cajun","Caribbean","Chinese","Eastern European","European","French","German","Greek","Indian","Irish","Italian","Japanese","Jewish","Korean","Latin American","Mediterranean","Mexican","Middle Eastern","Nordic","Southern","Spanish","Thai","Vietnamese"],h=["","Dairy","Egg","Gluten","Grain","Peanut","Seafood","Sesame","Shellfish","Soy","Sulfite","Tree Nut","Wheat"],p={name:"Search",components:{RecipePreviewList:o["a"]},data:function(){return{searched:0,query:"",number:"",form:{cuisine:"",diet:"",intolerances:""},submitError:[],numbers:[{value:null,text:"",disabled:!0}],cuisines:[{value:null,text:"",disabled:!0}],diets:[{value:null,text:"",disabled:!0}],intoleranceses:[{value:null,text:"",disabled:!0}],sortby:"",lastsearch:"",sort_time:"s",sort_popularity:"s"}},created:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("in Search Page"),e.getLastSearch();case 2:case"end":return t.stop()}}),t)})))()},mounted:function(){var e,t,r,n;(e=this.numbers).push.apply(e,Object(i["a"])(c)),this.numbers.shift(),this.number=this.numbers[0],(t=this.cuisines).push.apply(t,Object(i["a"])(l)),this.cuisines.shift(),(r=this.diets).push.apply(r,Object(i["a"])(u)),this.diets.shift(),(n=this.intoleranceses).push.apply(n,Object(i["a"])(h)),this.intoleranceses.shift()},methods:{onChangeQuery:function(){console.log("in onChangeQuery"),this.$emit("query",this.query)},onSearch:function(){console.log("in OnSearch"),this.searched+=1,this.lastsearch=this.query},onReset:function(){this.query="",this.number=this.numbers[0],this.form.diet="",this.form.cuisine="",this.form.intolerances="",this.sortby="",this.sort_time="s",this.sort_popularity="s",this.searched=0},sortBy:function(e){"time"==e?"readyInMinutes"==this.sortby?(this.sortby="",this.sort_time="s"):(this.sortby="readyInMinutes",this.sort_time="p",this.sort_popularity="s"):"popularity"==e&&("aggregateLikes"==this.sortby?(this.sortby="",this.sort_popularity="s"):(this.sortby="aggregateLikes",this.sort_popularity="p",this.sort_time="s")),searched>0&&(this.searched+=1)},getLastSearch:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},Search:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n,s,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.axios.get("https://localhost:3000/recipes/search",e.query+"&number="+e.number+"&cuisine="+e.form.cuisine==void 0||e.form.cuisine+"&diet="+e.form.diet==void 0||e.form.diet+"&intolerances="+e.form.intolerances==void 0?"":e.form.intolerances);case 3:if(r=t.sent,console.log(r.data),"There is no results!"!==r.data){t.next=9;break}e.$root.toast("Search a Recipe","There is no results for this search","failure"),t.next=23;break;case 9:n=r.data,s=[],i=0;case 12:if(!(i<n.length)){t.next=19;break}return t.next=15,e.axios.get(e.$root.store.server_domain+"/recipes/:recipeId?id="+n[i]);case 15:s[i]=t.sent;case 16:i++,t.next=12;break;case 19:for(a=0;a<s.length;a++)e.results[a]=s[a].data;console.log(e.results),console.log(e.searched),e.$root.store.lastSearch=e.results;case 23:t.next=29;break;case 25:t.prev=25,t.t0=t["catch"](0),console.log(t.t0.response),e.submitError=t.t0.response.data.message;case 29:case"end":return t.stop()}}),t,null,[[0,25]])})))()}}},m=p,f=r("2877"),d=Object(f["a"])(m,n,s,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-746908e5.675727d6.js.map